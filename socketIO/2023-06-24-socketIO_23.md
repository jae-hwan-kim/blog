---
title: "[DOCS] socketIO κ³µμ‹λ¬Έμ„ (25)"
categories:
    - socket
tags:
    - socketIO

last_modified_at: 2023-06-23T17:50:00
---

[Broadcasting events](https://socket.io/docs/v4/broadcasting-events/) νμ΄μ§€ ν•΄μ„

# 1. Broadcasting events

Socket.IO λ¥Ό μ‚¬μ©ν•λ©΄ μ—°κ²°λ λ¨λ“  ν΄λΌμ΄μ–ΈνΈμ— μ΄λ²¤νΈλ¥Ό μ‰½κ² μ „μ†΅ν•  μ μμµλ‹λ‹¤.

βπ» Broadcasting μ€ **μ„λ²„ μ „μ© κΈ°λ¥**μ΄λΌλ” μ μ— μ μν•μ„Έμ”.

<br>

---

## 1-1. To all connected clients

<img src="https://github.com/Gaepo-transcendance-fighters/ft_memo/assets/85930183/02a81c42-9bea-4fea-8f36-71222fdbf92e" width="90%">

```ts
io.emit("hello", "world");
```

β—οΈ ν„μ¬ μ—°κ²°μ΄ λμ–΄μ΅κ±°λ‚ μ¬μ—°κ²° μ¤‘μΈ ν΄λΌμ΄μ–ΈνΈλ” μ΄λ²¤νΈλ¥Ό λ°›μ§€ λ»ν•©λ‹λ‹¤. μ΄ μ΄λ²¤νΈλ¥Ό μ–΄λ”κ°€μ— μ €μ¥ν• μ§€(μ: λ°μ΄ν„°λ² μ΄μ¤ λ“±)λ” μ‚¬μ©μκ°€ κ²°μ •ν•  μ μμµλ‹λ‹¤.

<br>

---

## 1-2. To all connected clients except the sender

```ts
io.on("connection", (socket) => {
    socket.broadcast.emit("hello", "world");
});
```

βπ» μ„ μμ‹μ—μ„ `broadcast` ν”λκ·Έ μ—†μ΄ `socket.emit("hello", "world")`λ¥Ό μ‚¬μ©ν•λ©΄ "ν΄λΌμ΄μ–ΈνΈ A"λ΅ μ΄λ²¤νΈκ°€ μ „μ†΅λ©λ‹λ‹¤. μ΄λ²¤νΈλ¥Ό μ „μ†΅ν•λ” λ¨λ“  λ°©λ²•μ λ©λ΅μ€ [μΉνΈμ‹νΈ](https://socket.io/docs/v4/emit-cheatsheet/)μ—μ„ ν™•μΈν•  μ μμµλ‹λ‹¤.

<br>

---

## 1-3. With acknowledgements

Socket.IO 4.5.0 λ¶€ν„° μ—¬λ¬ ν΄λΌμ΄μ–ΈνΈμ— μ΄λ²¤νΈλ¥Ό λΈλ΅λ“μΊμ¤νΈν•κ³  κ° ν΄λΌμ΄μ–ΈνΈλ΅λ¶€ν„° μΉμΈμ„ λ°›μ„ μ μμµλ‹λ‹¤.

```ts
io.timeout(5000).emit("hello", "world", (err, responses) => {
    if (err) {
        // some clients did not acknowledge the event in the given delay
    } else {
        console.log(responses); // one response per client
    }
});
```

λ¨λ“  broadcasting ν•μ‹μ΄ μ§€μ›λ©λ‹λ‹¤.

-   in a room

    ```ts
    io.to("room123")
        .timeout(5000)
        .emit("hello", "world", (err, responses) => {
            // ...
        });
    ```

*   from a specific `socket`

    ```ts
    socket.broadcast.timeout(5000).emit("hello", "world", (err, responses) => {
        // ...
    });
    ```

*   in a namespace

    ```ts
    io.of("/the-namespace")
        .timeout(5000)
        .emit("hello", "world", (err, responses) => {
            // ...
        });
    ```

<br>

---

## 1-4. With multiple Socket.IO servers

Broadcasting μ€ μ—¬λ¬ Socket.IO μ„λ²„μ—μ„λ„ μ‘λ™ν•©λ‹λ‹¤.

κΈ°λ³Έ μ–΄λ‘ν„°λ¥Ό λ‹¤λ¥Έ [compatible Adapter](https://socket.io/docs/v4/adapter/) λλ” [Redis adapter](https://socket.io/docs/v4/redis-adapter/) λ΅ κµμ²΄ν•κΈ°λ§ ν•λ©΄ λ©λ‹λ‹¤.

<img src="https://github.com/Gaepo-transcendance-fighters/ft_memo/assets/85930183/9ea80cbe-ee47-47ed-a985-fa302a29670b" width="90%">

κ²½μ°μ— λ”°λΌ ν„μ¬ μ„λ²„μ— μ—°κ²°λ ν΄λΌμ΄μ–ΈνΈμ—κ²λ§ λΈλ΅λ“μΊμ¤νΈν•κ³  μ‹¶μ„ μλ„ μμµλ‹λ‹¤. μ΄ κ²½μ° `local` ν”λκ·Έλ¥Ό μ‚¬μ©ν•λ©΄ λ©λ‹λ‹¤.

```ts
io.local.emit("hello", "world");
```

<img src="https://github.com/Gaepo-transcendance-fighters/ft_memo/assets/85930183/cf71679b-561b-4a0f-a58b-55e5f6d38de1" width="90%">

Broadcasting μ„ ν•  λ• νΉμ • client λ¥Ό νƒ€κ²ν…ν•λ ¤λ©΄ [Rooms](https://socket.io/docs/v4/rooms/) μ— λ€ν• μ„¤λ…μ„λ¥Ό μ°Έμ΅°ν•μ„Έμ”.
