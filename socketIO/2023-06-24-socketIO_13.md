---
title: "[DOCS] socketIO ê³µì‹ë¬¸ì„œ (15)"
categories:
    - socket
tags:
    - socketIO

last_modified_at: 2023-06-23T13:15:00
---

[Handling CORS](https://socket.io/docs/v4/handling-cors/) íŽ˜ì´ì§€ í•´ì„

# 1. Handling CORS

## 1-1. Configuration

Socket.IO v3ë¶€í„°ëŠ” [`CORS(êµì°¨ ì¶œì²˜ ë¦¬ì†ŒìŠ¤ ê³µìœ )`](https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS)ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì‚¬ìš©í•˜ë„ë¡ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤.

```ts
import { createServer } from "http";
import { Server } from "socket.io";

const httpServer = createServer();
const io = new Server(httpServer, {
    cors: {
        origin: "https://example.com",
    },
});
```

ëª¨ë“  ì˜µì…˜ì€ [cors](https://www.npmjs.com/package/cors) íŒ¨í‚¤ì§€ë¡œ ì „ë‹¬ë©ë‹ˆë‹¤. ì „ì²´ ì˜µì…˜ ëª©ë¡ì€ [ì—¬ê¸°](https://github.com/expressjs/cors#configuration-options)ì—ì„œ í™•ì¸í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

ì¿ í‚¤([withCredentials](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/withCredentials)) ë° ì¶”ê°€ í—¤ë”ë¥¼ ì‚¬ìš©í•œ ì˜ˆì‹œìž…ë‹ˆë‹¤.

```ts
// server-side
const io = new Server(httpServer, {
    cors: {
        origin: "https://example.com",
        allowedHeaders: ["my-custom-header"],
        credentials: true,
    },
});

// client-side
import { io } from "socket.io-client";
const socket = io("https://api.example.com", {
    withCredentials: true,
    extraHeaders: {
        "my-custom-header": "abcd",
    },
});
```

â˜ðŸ» ì°¸ê³ : ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ì„œë²„ê°€ ë™ì¼í•œ í¬íŠ¸ì—ì„œ ì œê³µë˜ì§€ ì•ŠëŠ” ê²½ìš° ë¡œì»¬ í˜¸ìŠ¤íŠ¸ì—ë„ ì ìš©ë©ë‹ˆë‹¤.

```ts
const io = new Server(httpServer, {
    cors: {
        origin: "http://localhost:8080",
    },
});

httpServer.listen(3000);
```

í—ˆìš© ìš”ì²­ ì˜µì…˜ì„ ì‚¬ìš©í•˜ì—¬ ëª¨ë“  êµì°¨ ì¶œì²˜ ìš”ì²­ì„ í—ˆìš©í•˜ì§€ ì•Šì„ ìˆ˜ ìžˆìŠµë‹ˆë‹¤:

```ts
const io = new Server(httpServer, {
    allowRequest: (req, callback) => {
        const noOriginHeader = req.headers.origin === undefined;
        callback(null, noOriginHeader); // only allow requests without 'origin' header
    },
});
```

<br>

---

## 1-2. Troubleshooting
