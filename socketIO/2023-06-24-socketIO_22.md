---
title: "[DOCS] socketIO ê³µì‹ë¬¸ì„œ (24)"
categories:
    - socket
tags:
    - socketIO

last_modified_at: 2023-06-23T16:21:00
---

[Listening to events](https://socket.io/docs/v4/listening-to-events/) í˜ì´ì§€ í•´ì„

# 1. Listening to events

ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ ê°„ì— ì „ì†¡ë˜ëŠ” ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•ì—ëŠ” ì—¬ëŸ¬ ê°€ì§€ê°€ ìˆìŠµë‹ˆë‹¤.

<br>

---

## 1-1. EventEmitter methods

â’ Server

ì„œë²„ ì¸¡ì—ì„œ ì†Œì¼“ ì¸ìŠ¤í„´ìŠ¤ëŠ” Node.js [EventEmitter](https://nodejs.org/docs/latest/api/events.html#events_events) í´ë˜ìŠ¤ë¥¼ í™•ì¥í•©ë‹ˆë‹¤.

<br>

â’ Client

í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œ ì†Œì¼“ ì¸ìŠ¤í„´ìŠ¤ëŠ” [component-emitter](https://github.com/component/emitter) library ì—ì„œ ì œê³µí•˜ëŠ” `event emitter` ë¥¼ ì‚¬ìš©í•˜ë©°, ì´ `library` ëŠ” `EventEmitter` ë©”ì„œë“œì˜ í•˜ìœ„ ì§‘í•©ì…ë‹ˆë‹¤.

<br>

---

### â†˜ï¸ socket.on(eventName, listener)

<i>listener</i> í•¨ìˆ˜ë¥¼ <i>eventName</i> ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë°°ì—´ì˜ ëì— ì¶”ê°€í•©ë‹ˆë‹¤.

```ts
socket.on("details", (...args) => {
    // ...
});
```

<br>

---

### â†˜ï¸ socket.once(eventName, listener)

<i>eventName</i> ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ì´ë²¤íŠ¸ë¥¼ **ì¼íšŒì„±** <i>listener</i> í•¨ìˆ˜ë¡œ ì¶”ê°€í•©ë‹ˆë‹¤.

```ts
socket.once("details", (...args) => {
    // ...
});
```

<br>

---

### â†˜ï¸ socket.off(eventName, listener)

<i>eventName</i> ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ì´ë²¤íŠ¸ë¥¼ <i>listener</i> ë°°ì—´ì—ì„œ ì‚­ì œí•©ë‹ˆë‹¤.

```ts
const listener = (...args) => {
    console.log(args);
};

socket.on("details", listener);

// and then later...
socket.off("details", listener);
```

<br>

---

### â†˜ï¸ socket.removeAllListeners([eventName])

ëª¨ë“  ë¦¬ìŠ¤ë„ˆ ë˜ëŠ” ì§€ì •ëœ ì´ë²¤íŠ¸ ì´ë¦„ì˜ ë¦¬ìŠ¤ë„ˆë¥¼ ì œê±°í•©ë‹ˆë‹¤.

```ts
// for a specific event
socket.removeAllListeners("details");
// for all events
socket.removeAllListeners();
```

<br>

---

## 1-2. Catch-all listeners

Socket.IO v3ë¶€í„° [EventEmitter2](https://github.com/EventEmitter2/EventEmitter2) ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ì˜ê°ì„ ì–»ì€ ìƒˆë¡œìš´ APIë¥¼ í†µí•´ catch-all listeners ë¥¼ ì„ ì–¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ ê¸°ëŠ¥ì€ í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ ëª¨ë‘ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br>

---

### â†˜ï¸ socket.onAny(listener)

ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ë©´ ì‹¤í–‰ë  ë¦¬ìŠ¤ë„ˆë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.

```ts
socket.onAny((eventName, ...args) => {
    // ...
});
```

â—ï¸ ì£¼ì˜ì‚¬í•­ : [`Acknowledgements`](https://socket.io/docs/v4/emitting-events/#acknowledgements) ì€ ìºì¹˜ì˜¬ ë¦¬ìŠ¤ë„ˆì— ì¡íˆì§€ ì•ŠìŠµë‹ˆë‹¤.

```ts
socket.emit("foo", (value) => {
    // ...
});

socket.onAnyOutgoing(() => {
    // triggered when the event is sent
});

socket.onAny(() => {
    // not triggered when the acknowledgement is received
});
```

<br>

---

### â†˜ï¸ socket.prependAny(listener)

ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ë©´ ì‹¤í–‰ë  ë¦¬ìŠ¤ë„ˆë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤. ë¦¬ìŠ¤ë„ˆëŠ” ë¦¬ìŠ¤ë„ˆ ë°°ì—´ì˜ ì‹œì‘ ë¶€ë¶„ì— ì¶”ê°€ë©ë‹ˆë‹¤.

```ts
socket.prependAny((eventName, ...args) => {
    // ...
});
```

<br>

---

### â†˜ï¸ socket.offAny([listener])

ëª¨ë“  catch-all ë¦¬ìŠ¤ë„ˆ ë˜ëŠ” ì§€ì •ëœ ë¦¬ìŠ¤ë„ˆë¥¼ ì œê±°í•©ë‹ˆë‹¤.

```ts
const listener = (eventName, ...args) => {
    console.log(eventName, args);
};

socket.onAny(listener);

// and then later...
socket.offAny(listener);

// or all listeners
socket.offAny();
```

<br>

---

### â†˜ï¸ socket.onAnyOutgoing(listener)

<br>

---

### â†˜ï¸ socket.prependAnyOutgoing(listener)

<br>

---

### â†˜ï¸ socket.offAnyOutgoing([listener])

<br>

---

## 1-3. Validation

<br>

---

## 1-4. Error handling

<br>

---

## ETC

### â“ socket.onAny(listener) ì™€ socket.prependAny(listener) ì˜ ì°¨ì´

ğŸ„° <br>
socket.onAny(listener) <br>
This method adds the specified listener function `to the end of the listeners array` for all events on the socket. It means that the listener will be `executed after any previously registered listeners` for the same event.

socket.prependAny(listener)<br>
This method adds the specified listener function `to the beginning of the listeners array` for all events on the socket. It means that the listener will be `executed before any previously registered listeners` for the same event.

---

### â“ socket.offAny([listener])

ğŸ„°

```ts
const listener1 = (eventName, ...args) => {
    console.log("Listener 1:", eventName, args);
};

const listener2 = (eventName, ...args) => {
    console.log("Listener 2:", eventName, args);
};

socket.onAny(listener1);
socket.prependAny(listener2);

socket.emit("someEvent", "data");

// Remove listener1
socket.offAny(listener1);

socket.emit("someEvent", "data");
```

ì¶œë ¥ :

```ts
Listener 2: someEvent [ 'data' ]
```
